<!DOCTYPE html>
<html>

    <head>

        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <meta name="viewport" content="width=device-width">
        <title>service worker</title>
    </head>

    <body>

	    
	        <button onclick="sayHI()">Say HI</button>
		<button onclick="unknownCmd()">Send unknown command</button>
		<button onclick="stop()">Stop worker</button>
		<output id="result"></output>
		<script type="text/javascript">
// 			var worker = new Worker('doWork.js');
			
// 			worker.addEventListener('message', function(e){
// 				console.log('Worker said: ', e.data);
// 			}, false);

// 			worker.postMessage('Hello World');
			
			function sayHI() {
				worker.postMessage({'cmd': 'stop', 'msg': 'Bye'});
			}
			function stop() {
			    // worker.terminate() from this script would also stop the worker.
			    worker.postMessage({'cmd': 'stop', 'msg': 'Bye'});
			  }

			function unknownCmd() {
			    worker.postMessage({'cmd': 'foobard', 'msg': '???'});
			  }

			  var worker = new Worker('doWork2.js');

			  worker.addEventListener('message', function(e) {
			    document.getElementById('result').textContent = e.data;
			  }, false);
		</script>

    </body>

</html>
